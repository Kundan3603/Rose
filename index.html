<!DOCTYPE html>
<html>
<head>
    <title>Animated Blooming Rose with Spotify</title>
    <style>
        body { 
            margin: 0; 
            background-color: #050505; 
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #eee;
        }
        
        canvas { 
            background-color: #111; 
            box-shadow: 0 0 25px rgba(139, 0, 0, 0.2);
            border-radius: 4px;
        }
        
        /* Animation Control Button */
        .bloom-btn {
            margin: 20px 0; /* Spacing between canvas and player */
            padding: 10px 25px;
            background-color: #8B0000;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        .bloom-btn:hover {
            background-color: #ff3333;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 0, 0, 0.4);
        }

        /* --- SPOTIFY CONTAINER STYLES --- */
        .spotify-container {
            width: 100%;
            max-width: 400px; /* Limits width for a nice look */
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border-radius: 12px;
            overflow: hidden; /* Ensures rounded corners on iframe */
        }
        
        iframe {
            display: block; /* Removes weird bottom spacing */
        }
    </style>
</head>
<body>

    <canvas id="roseCanvas"></canvas>
    
    <button class="bloom-btn" onclick="resetBloom()">Re-bloom Rose</button>

    <div class="spotify-container">
        <iframe 
            style="border-radius:12px" 
            src="https://open.spotify.com/embed/playlist/37i9dQZF1DWWEJlAGA9gs0?utm_source=generator&theme=0" 
            width="100%" 
            height="152" 
            frameBorder="0" 
            allowfullscreen="" 
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
            loading="lazy">
        </iframe>
    </div>
    <script>
        // --- ROSE ANIMATION SCRIPT --- 
        const canvas = document.getElementById('roseCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 600;
        canvas.height = 650; // Adjusted height for layout

        let petalCount = 0;      
        let bloomSpread = 0;      
        let animationId;          
        
        const MAX_PETALS = 2500;  
        const MAX_SPREAD = 12;    
        const GROWTH_SPEED = 15;  

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2 - 20;

            drawStem(centerX, centerY);
            drawLeaf(centerX, centerY + 100, -0.5); 
            drawLeaf(centerX, centerY + 180, 0.5);  

            drawRoseHead(centerX, centerY, petalCount, bloomSpread);

            if (petalCount < MAX_PETALS) petalCount += GROWTH_SPEED;
            if (bloomSpread < MAX_SPREAD) bloomSpread += 0.05;

            if (petalCount < MAX_PETALS || bloomSpread < MAX_SPREAD) {
                animationId = requestAnimationFrame(draw);
            }
        }

        function drawRoseHead(centerX, centerY, count, spread) {
            ctx.save();
            ctx.translate(centerX, centerY);
            for (let i = 0; i < count; i++) {
                let angle = i * 0.1;
                let radius = spread * Math.sqrt(i) * Math.sin(i * 0.05); 
                let x = radius * Math.cos(angle);
                let y = radius * Math.sin(angle);
                ctx.beginPath();
                ctx.arc(x, y, 6, 0, Math.PI * 2);
                let red = Math.floor(130 + Math.random() * 100);
                ctx.fillStyle = `rgba(${red}, 0, 0, 0.7)`;
                ctx.fill();
            }
            ctx.restore();
        }

        function drawStem(x, y) {
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.quadraticCurveTo(x - 10, y + 200, x, y + 400);
            ctx.lineWidth = 8;
            ctx.strokeStyle = '#2d5a27';
            ctx.stroke();
            ctx.closePath();
        }

        function drawLeaf(x, y, angle) {
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(angle);
            ctx.beginPath();
            ctx.ellipse(30, 0, 40, 15, 0, 0, Math.PI * 2);
            ctx.fillStyle = '#3a7a34';
            ctx.fill();
            ctx.strokeStyle = '#21441e';
            ctx.stroke();
            ctx.restore();
        }

        function resetBloom() {
            cancelAnimationFrame(animationId);
            petalCount = 0;
            bloomSpread = 0;
            draw();
        }

        // Start animation
        draw();
    </script>
</body>
</html>
